# egg_showflickrset 0.21
# Displays a flickr set
# Eric Eggert
# http://yatil.de/

# .....................................................................
# This is a plugin for Textpattern - http://textpattern.com/
# To install: textpattern > admin > plugins
# Paste the following text into the 'Install plugin' box:
# .....................................................................

YTo5OntzOjQ6Im5hbWUiO3M6MTc6ImVnZ19zaG93ZmxpY2tyc2V0IjtzOjY6ImF1dGhvciI7czoxMToiRXJpYyBFZ2dlcnQiO3M6MTA6ImF1dGhvcl91cmkiO3M6MTY6Imh0dHA6Ly95YXRpbC5kZS8iO3M6NzoidmVyc2lvbiI7czo0OiIwLjIxIjtzOjExOiJkZXNjcmlwdGlvbiI7czoyMToiRGlzcGxheXMgYSBmbGlja3Igc2V0IjtzOjQ6ImhlbHAiO3M6NzU1OiI8aDE+ZWdnX2ZsaWNrcnNldDwvaDE+DQoNCjxwPlRha2VzIHRoZSBmb2xsb3dpbmcgcGFyYW1ldGVyczoNCg0KPGRsPjxkdD48Y29kZT5zZXQ8L2NvZGU+PC9kdD48ZGQ+SUQgb2YgdGhlIHNldCB0byBkaXNwbGF5LCB5b3UgY2FuIGV4dHJhY3QgdGhhdCBlYXNpbHkgZnJvbSB0aGUgVVJMOiA8Y29kZT5odHRwOi8vd3d3LmZsaWNrci5jb20vcGhvdG9zL3lhdGlsL3NldHMvPHN0cm9uZz4gNzIxNTc2MTg3MTcwMjU2NTQgPC9zdHJvbmc+LzwvY29kZT48L2RkPjxkdD48Y29kZT5tYXg8L2NvZGU+PC9kdD48ZGQ+U2hvd3MgeCBwaG90b3MuIElmIHRoZXJlIGFyZSBtb3JlIHBob3RvcyBpbiBhIHNldCwgYSBsaW5rIHRvIHRoZSBzZXQgaXMgaW5jbHVkZWQuPC9kZD48ZHQ+PGNvZGU+YWxpZ248L2NvZGU+PC9kdD48ZGQ+QWRkcyBhbiBhZGRpdGlvbmFsIGNsYXNzIHRvIHRoZSB1bCwgdG8gdXNlIHdpdGggQ1NTLjwvZGQ+PGR0Pjxjb2RlPmRlc2M8L2NvZGU+PC9kdD48ZGQ+SWYgZGVzY3JpcHRpb24gc2hvdWxkIGJlIGluY2x1ZGVkIHRoZSB2YWx1ZSBpcyA8Y29kZT55ZXM8L2NvZGU+IChkZWZhdWx0IHZhbHVlKSwgZWxzZSA8Y29kZT5ubzwvY29kZT4uPC9kZD48L2RsPg0KDQo8cD5Tb21lIHRoaW5ncyBhcmUgc3RpbGwgaGFyZGNvZGVkLCBsaWtlIGdlcm1hbiB0ZXh0IHN0cmluZ3Mgb3IgdGhlIGRvdWJsZSBwaG90byBmb3IgQ1NTIHRyaWNrcy4gVGhpcyB3aWxsIGJlIGNoYW5nZWQgYXQgc29tZSAgdGltZSBpbiB0aGUgZnV0dXJlLiI7czo0OiJjb2RlIjtzOjMwOTI6Ii8vIDw/cGhwIFRoaXMgaGVscHMgdG8gc2hvdyBzeW50YXggaGlnaGxpZ2h0aW5nIGluIFRleHRtYXRlIHdoZW4gYyZwIGNvZGUgZnJvbSB0aGUgcGx1Z2luIGNvbXBvc2VyDQoNCmZ1bmN0aW9uIGVnZ19zZXQoJGF0dHMpDQp7DQoNCglnbG9iYWwgJGlzRmVlZDsgLy8gU2V0ICRpc0ZlZWQgdG8gMSB0byBhbHRlciB0aGUgZmVlZCBkaXNwbGF5DQoNCglpZiAoaXNfYXJyYXkoJGF0dHMpKSBleHRyYWN0KCRhdHRzKTsNCg0KCSRzZXQgPSBpc3NldCgkc2V0KSA/ICRzZXQgOiAnNzIxNTc2MTg3MTcwMjU2NTQnOw0KCSRtYXggPSBpc3NldCgkbWF4KSA/ICRtYXggOiAnMjAnOyANCgkkYWxpZ24gPSBpc3NldCgkYWxpZ24pID8gJyAnLiRhbGlnbiA6ICcgZnVsbCc7DQoJJGRlc2MgPSBpc3NldCgkZGVzYykgPyAkZGVzYyA6ICd5ZXMnOw0KDQoJLyogR2V0IEluZm9zICovDQoNCgkkcGFyYW1zID0gYXJyYXkoDQoJCSdhcGlfa2V5Jwk9PiAnNDRmYjQ5ZGZhMDQxZGY2ZGFjOTM4YTJjMjUxNjYyODgnLA0KCQknbWV0aG9kJwk9PiAnZmxpY2tyLnBob3Rvc2V0cy5nZXRJbmZvJywNCgkJJ3Bob3Rvc2V0X2lkJwk9PiAkc2V0LA0KCQknZm9ybWF0Jwk9PiAncGhwX3NlcmlhbCcNCgkpOw0KDQoJJGVuY29kZWRfcGFyYW1zID0gYXJyYXkoKTsNCg0KCWZvcmVhY2ggKCRwYXJhbXMgYXMgJGsgPT4gJHYpIHsNCgkJJGVuY29kZWRfcGFyYW1zW10gPSB1cmxlbmNvZGUoJGspLic9Jy51cmxlbmNvZGUoJHYpOw0KCX0NCg0KDQoJJHVybCA9ICJodHRwOi8vYXBpLmZsaWNrci5jb20vc2VydmljZXMvcmVzdC8/Ii5pbXBsb2RlKCcmJywgJGVuY29kZWRfcGFyYW1zKTsNCg0KICAgIAkkY2ggPSBjdXJsX2luaXQoJHVybCk7DQogICAgCWN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9IRUFERVIsIDApOw0KICAgIAljdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfUE9TVCwgMSk7DQogICAgCWN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9SRVRVUk5UUkFOU0ZFUiwgMSk7DQogICAgCQ0KCQkkb3V0cHV0ID0gY3VybF9leGVjKCRjaCk7ICAgICAgIA0KICAgIAkNCgkJY3VybF9jbG9zZSgkY2gpOw0KDQoJCSRyZXR1cm4gPSB1bnNlcmlhbGl6ZSgkb3V0cHV0KTsNCg0KCQkkdGl0bGUgPSAkcmV0dXJuWydwaG90b3NldCddWyd0aXRsZSddWydfY29udGVudCddOw0KCQkkZGVzY3JpcHRpb24gPSAkcmV0dXJuWydwaG90b3NldCddWydkZXNjcmlwdGlvbiddWydfY29udGVudCddOw0KCQkkcmVzdCA9ICRyZXR1cm5bJ3Bob3Rvc2V0J11bJ3Bob3RvcyddLTIwOw0KDQoJCSRvd25lciA9ICRyZXR1cm5bJ3Bob3Rvc2V0J11bJ293bmVyJ107DQoNCi8qIEdldCBJbmZvcyBFTkQgKi8NCg0KLyogR2V0IFBob3RvcyAqLw0KDQoJJHBhcmFtcyA9IGFycmF5KA0KCQknYXBpX2tleScJPT4gJzQ0ZmI0OWRmYTA0MWRmNmRhYzkzOGEyYzI1MTY2Mjg4JywNCgkJJ21ldGhvZCcJPT4gJ2ZsaWNrci5waG90b3NldHMuZ2V0UGhvdG9zJywNCgkJJ3Bob3Rvc2V0X2lkJwk9PiAkc2V0LA0KCQkncGVyX3BhZ2UnID0+ICRtYXgsDQoJCSdmb3JtYXQnCT0+ICdwaHBfc2VyaWFsJw0KCSk7DQoNCgkkZW5jb2RlZF9wYXJhbXMgPSBhcnJheSgpOw0KDQoJZm9yZWFjaCAoJHBhcmFtcyBhcyAkayA9PiAkdil7DQoJCSRlbmNvZGVkX3BhcmFtc1tdID0gdXJsZW5jb2RlKCRrKS4nPScudXJsZW5jb2RlKCR2KTsNCgl9DQoNCg0KCSR1cmwgPSAiaHR0cDovL2FwaS5mbGlja3IuY29tL3NlcnZpY2VzL3Jlc3QvPyIuaW1wbG9kZSgnJicsICRlbmNvZGVkX3BhcmFtcyk7DQoNCiAgICAkY2ggPSBjdXJsX2luaXQoJHVybCk7DQogICAgY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX0hFQURFUiwgMCk7DQogICAgY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1BPU1QsIDEpOw0KICAgIGN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9SRVRVUk5UUkFOU0ZFUiwgMSk7DQogICAgDQoJJG91dHB1dCA9IGN1cmxfZXhlYygkY2gpOyAgICAgICANCg0KICAgIGN1cmxfY2xvc2UoJGNoKTsNCg0KCSRwaG90b3MgPSB1bnNlcmlhbGl6ZSgkb3V0cHV0KTsNCg0KCSRwaG90b3MgPSAkcGhvdG9zWydwaG90b3NldCddWydwaG90byddOw0KCSRpID0gMDsNCg0KCSRvID0gJzxoMyBjbGFzcz0icGhvdG9zZXQiPkZvdG9zYW1tbHVuZzogwrs8YSBocmVmPSJodHRwOi8vd3d3LmZsaWNrci5jb20vcGhvdG9zLycuJG93bmVyLicvc2V0cy8nLiRzZXQuJyI+Jy4kdGl0bGUuJzwvYT7CqzwvaDM+JzsNCgkNCglpZiAoJGRlc2M9PSJ5ZXMiKSB7DQoJCSRvIC49ICgkZGVzY3JpcHRpb249PT0iIikgPyAiIiA6ICc8cCBjbGFzcz0icGhvdG9zZXQiPicuJGRlc2NyaXB0aW9uLiI8L3A+IjsNCgl9DQoJDQoJJG8gLj0gJzx1bCBjbGFzcz0icGhvdG9zZXQnLiRhbGlnbi4nIj4nOw0KCQ0KCWZvcmVhY2ggKCRwaG90b3MgYXMgJHBob3RvKSB7DQoJCSRpKys7DQoJCSRvIC49ICI8bGk+IjsNCgkJJG8gLj0gJzxhIGhyZWY9Imh0dHA6Ly93d3cuZmxpY2tyLmNvbS9waG90b3MvJy4kb3duZXIuJy8nLiRwaG90b1snaWQnXS4nL2luL3NldC0nLiRzZXQuJy8iPjxpbWcgc3JjPSJodHRwOi8vZmFybScuJHBob3RvWydmYXJtJ10uJy5zdGF0aWMuZmxpY2tyLmNvbS8nLiRwaG90b1snc2VydmVyJ10uJy8nLiRwaG90b1snaWQnXS4nXycuJHBob3RvWydzZWNyZXQnXS4nX3MuanBnIiBhbHQ9IicuJHBob3RvWyd0aXRsZSddLiciPic7DQoJCSRvIC49ICgkaXNGZWVkKSA/ICIiIDogJzxpbWcgc3JjPSJodHRwOi8vZmFybScuJHBob3RvWydmYXJtJ10uJy5zdGF0aWMuZmxpY2tyLmNvbS8nLiRwaG90b1snc2VydmVyJ10uJy8nLiRwaG90b1snaWQnXS4nXycuJHBob3RvWydzZWNyZXQnXS4nX20uanBnIiBhbHQ9IiIgY2xhc3M9ImxhcmdlIj4nOw0KCQkkbyAuPSAnPC9hPic7DQoJCSRvIC49ICI8L2xpPiI7DQoJfQ0KDQoJaWYgKCRpPT0kbWF4KSB7DQoJCSRvIC49JzxsaSBjbGFzcz0ibGFzdG9uZSI+PGEgaHJlZj0iaHR0cDovL3d3dy5mbGlja3IuY29tL3Bob3Rvcy8nLiRvd25lci4nL3NldHMvJy4kc2V0LiciPicuJHJlc3QuJyB3ZWl0ZXJlIEZvdG9zIGFuemVpZ2VuJmhlbGxpcDs8L2E+PC9saT4nOw0KCX0NCg0KCSRvIC49IjwvdWw+IjsNCg0KcmV0dXJuICRvOw0KDQp9IjtzOjQ6InR5cGUiO3M6MToiMCI7czozOiJtZDUiO3M6MzI6IjRlOTljMWUzYjA3MDFhMDE3M2Q1MzdkMmMwYmUyM2I2Ijt9